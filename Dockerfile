FROM node:16.17.0

WORKDIR /app

COPY package*.json ./

RUN npm install --force

COPY . .

ENV PORT 4000
ENV NODE_ENV PRODUCTION
ENV FRONTEND_URL "http://localhost:3000"

ENV DB_LOCAL_URI  mongodb://localhost:27017/electronz

ENV DB_URI mongodb+srv://director-keerthi975:Saraprison.123@electronz.esqdv.mongodb.net/electronz?retryWrites=true&w=majority

ENV JWT_SECRET SFJHJFE87R8944NFNDF98UFSDIFJFSDJFSDJUYHSDFSIOJF8344KJDFKJI49

ENV JWT_EXPIRES_TIME 7d

ENV COOKIE_EXPIRES_TIME 7
 
ENV CLOUDINARY_CLOUD_NAME electronz
ENV CLOUDINARY_API_KEY 392136671733834
ENV CLOUDINARY_API_SECRET RQ_4cXapu6frFNOf3nCXVOhC2a0

ENV STRIPE_SECRET_KEY sk_test_51LNi9tSCLG8evVNAbJKyy9xqBX4gpATarav5I7huYxBnkrQypWSCHCj9laThIlQSMc9F3RlaTz4cu9EQLyc69C1v00f8GExuWa
ENV STRIPE_API_KEY pk_test_51LNi9tSCLG8evVNArC3ShaH2DrQ98rYD5wo8WJurpSsBNw7It4T0vCe3PGfjvHYGhFF3CKwH3IDZZTPUUJ72xBqK00gy29JzF2


ENV SMTP_HOST smtp.mailtrap.io
ENV SMTP_PORT 2525
ENV SMTP_EMAIL 8a0d91dac748de
ENV SMTP_PASSWORD cc09f458ed7848
ENV SMTP_FROM_EMAIL noreply@electronz.com
ENV SMTP_FROM_NAME ElectronZ

EXPOSE 4000

CMD ["npm", "run", "docker-build-webapp"]